{
  "id": "3f1b880c-aeca-4c03-8a7b-01b4cb5c8435",
  "prevId": "17abe9fe-050e-46f6-a1bf-6ea09d8d70f7",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.airports": {
      "name": "airports",
      "schema": "",
      "columns": {
        "code": {
          "name": "code",
          "type": "varchar(3)",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.booking_flights": {
      "name": "booking_flights",
      "schema": "",
      "columns": {
        "booking_id": {
          "name": "booking_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "flight_instance_id": {
          "name": "flight_instance_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "hop_order": {
          "name": "hop_order",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "booking_flights_booking_id_bookings_id_fk": {
          "name": "booking_flights_booking_id_bookings_id_fk",
          "tableFrom": "booking_flights",
          "tableTo": "bookings",
          "columnsFrom": [
            "booking_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "booking_flights_flight_instance_id_flight_instances_id_fk": {
          "name": "booking_flights_flight_instance_id_flight_instances_id_fk",
          "tableFrom": "booking_flights",
          "tableTo": "flight_instances",
          "columnsFrom": [
            "flight_instance_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "booking_flights_booking_id_hop_order_pk": {
          "name": "booking_flights_booking_id_hop_order_pk",
          "columns": [
            "booking_id",
            "hop_order"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.bookings": {
      "name": "bookings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "ref_id": {
          "name": "ref_id",
          "type": "varchar(32)",
          "primaryKey": false,
          "notNull": true
        },
        "origin": {
          "name": "origin",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true
        },
        "destination": {
          "name": "destination",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true
        },
        "pieces": {
          "name": "pieces",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "weight_kg": {
          "name": "weight_kg",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "booking_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'BOOKED'"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "bookings_origin_airports_code_fk": {
          "name": "bookings_origin_airports_code_fk",
          "tableFrom": "bookings",
          "tableTo": "airports",
          "columnsFrom": [
            "origin"
          ],
          "columnsTo": [
            "code"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "bookings_destination_airports_code_fk": {
          "name": "bookings_destination_airports_code_fk",
          "tableFrom": "bookings",
          "tableTo": "airports",
          "columnsFrom": [
            "destination"
          ],
          "columnsTo": [
            "code"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "bookings_created_by_users_id_fk": {
          "name": "bookings_created_by_users_id_fk",
          "tableFrom": "bookings",
          "tableTo": "users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "bookings_ref_id_unique": {
          "name": "bookings_ref_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "ref_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.events": {
      "name": "events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "entity_type": {
          "name": "entity_type",
          "type": "event_entity",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "event_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "location": {
          "name": "location",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "byEntity": {
          "name": "byEntity",
          "columns": [
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "events_location_airports_code_fk": {
          "name": "events_location_airports_code_fk",
          "tableFrom": "events",
          "tableTo": "airports",
          "columnsFrom": [
            "location"
          ],
          "columnsTo": [
            "code"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "events_created_by_users_id_fk": {
          "name": "events_created_by_users_id_fk",
          "tableFrom": "events",
          "tableTo": "users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.flight_instances": {
      "name": "flight_instances",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "schedule_id": {
          "name": "schedule_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "flight_number": {
          "name": "flight_number",
          "type": "varchar(16)",
          "primaryKey": false,
          "notNull": true
        },
        "airline_name": {
          "name": "airline_name",
          "type": "varchar(120)",
          "primaryKey": false,
          "notNull": true
        },
        "origin": {
          "name": "origin",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true
        },
        "destination": {
          "name": "destination",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true
        },
        "departure_at": {
          "name": "departure_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "arrival_at": {
          "name": "arrival_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "operate_date": {
          "name": "operate_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "flight_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'SCHEDULED'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "byODD": {
          "name": "byODD",
          "columns": [
            {
              "expression": "origin",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "destination",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "operate_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "byOriginDate": {
          "name": "byOriginDate",
          "columns": [
            {
              "expression": "origin",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "operate_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "departure_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "byDestDate": {
          "name": "byDestDate",
          "columns": [
            {
              "expression": "destination",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "operate_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "arrival_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "flight_instances_schedule_id_flight_schedules_id_fk": {
          "name": "flight_instances_schedule_id_flight_schedules_id_fk",
          "tableFrom": "flight_instances",
          "tableTo": "flight_schedules",
          "columnsFrom": [
            "schedule_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "flight_instances_origin_airports_code_fk": {
          "name": "flight_instances_origin_airports_code_fk",
          "tableFrom": "flight_instances",
          "tableTo": "airports",
          "columnsFrom": [
            "origin"
          ],
          "columnsTo": [
            "code"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "flight_instances_destination_airports_code_fk": {
          "name": "flight_instances_destination_airports_code_fk",
          "tableFrom": "flight_instances",
          "tableTo": "airports",
          "columnsFrom": [
            "destination"
          ],
          "columnsTo": [
            "code"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.flight_schedules": {
      "name": "flight_schedules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "flight_number": {
          "name": "flight_number",
          "type": "varchar(16)",
          "primaryKey": false,
          "notNull": true
        },
        "airline_name": {
          "name": "airline_name",
          "type": "varchar(120)",
          "primaryKey": false,
          "notNull": true
        },
        "origin": {
          "name": "origin",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true
        },
        "destination": {
          "name": "destination",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true
        },
        "departure_time_local": {
          "name": "departure_time_local",
          "type": "time",
          "primaryKey": false,
          "notNull": true
        },
        "arrival_time_local": {
          "name": "arrival_time_local",
          "type": "time",
          "primaryKey": false,
          "notNull": true
        },
        "weekdays_mask": {
          "name": "weekdays_mask",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "byOD": {
          "name": "byOD",
          "columns": [
            {
              "expression": "origin",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "destination",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "flight_schedules_origin_airports_code_fk": {
          "name": "flight_schedules_origin_airports_code_fk",
          "tableFrom": "flight_schedules",
          "tableTo": "airports",
          "columnsFrom": [
            "origin"
          ],
          "columnsTo": [
            "code"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "flight_schedules_destination_airports_code_fk": {
          "name": "flight_schedules_destination_airports_code_fk",
          "tableFrom": "flight_schedules",
          "tableTo": "airports",
          "columnsFrom": [
            "destination"
          ],
          "columnsTo": [
            "code"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.routes": {
      "name": "routes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "origin": {
          "name": "origin",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true
        },
        "destination": {
          "name": "destination",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true
        },
        "transit_airport": {
          "name": "transit_airport",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "uniq_route_triple": {
          "name": "uniq_route_triple",
          "columns": [
            {
              "expression": "origin",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "destination",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "transit_airport",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "routes_origin_airports_code_fk": {
          "name": "routes_origin_airports_code_fk",
          "tableFrom": "routes",
          "tableTo": "airports",
          "columnsFrom": [
            "origin"
          ],
          "columnsTo": [
            "code"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "routes_destination_airports_code_fk": {
          "name": "routes_destination_airports_code_fk",
          "tableFrom": "routes",
          "tableTo": "airports",
          "columnsFrom": [
            "destination"
          ],
          "columnsTo": [
            "code"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "routes_transit_airport_airports_code_fk": {
          "name": "routes_transit_airport_airports_code_fk",
          "tableFrom": "routes",
          "tableTo": "airports",
          "columnsFrom": [
            "transit_airport"
          ],
          "columnsTo": [
            "code"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "password": {
          "name": "password",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "refresh_token": {
          "name": "refresh_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "role": {
          "name": "role",
          "type": "user_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'CUSTOMER'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_email_unique": {
          "name": "users_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.booking_status": {
      "name": "booking_status",
      "schema": "public",
      "values": [
        "BOOKED",
        "DEPARTED",
        "ARRIVED",
        "DELIVERED",
        "CANCELLED"
      ]
    },
    "public.event_entity": {
      "name": "event_entity",
      "schema": "public",
      "values": [
        "BOOKING"
      ]
    },
    "public.event_type": {
      "name": "event_type",
      "schema": "public",
      "values": [
        "BOOKED",
        "DEPARTED",
        "ARRIVED",
        "DELIVERED",
        "CANCELLED"
      ]
    },
    "public.flight_status": {
      "name": "flight_status",
      "schema": "public",
      "values": [
        "SCHEDULED",
        "DEPARTED",
        "ARRIVED",
        "CANCELLED"
      ]
    },
    "public.user_role": {
      "name": "user_role",
      "schema": "public",
      "values": [
        "ADMIN",
        "CUSTOMER"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}